package com.shinobigroup.configuration;

import java.util.Properties;
import java.util.Collections;
import java.util.HashSet;
import java.util.Set;
import java.io.*;

@SuppressWarnings("serial")
public class EnvironmentProperties extends Properties {

	public EnvironmentProperties() {}
	public EnvironmentProperties(Properties defaults) {
		super(defaults);
	}
	
	//
	// Property accessors
	//
	
	@Override
	public String getProperty(String key) {
		String value = System.getenv(key);
		return value == null ? super.getProperty(key) : value;
	}
	
	@Override 
	public String getProperty(String key, String defaultValue) {
		String value = getProperty(key);
		return value == null ? defaultValue : value;
	}
	
	@Override
	public Object setProperty(String key, String value) {
		return getProperty(key);
	}

	//
	// Property Name enumeration
	//
	
	@Override
	public Set<String> stringPropertyNames() {
		Set<String> names = new HashSet<String>();
		names.addAll(super.stringPropertyNames());
		names.addAll(System.getenv().keySet());
		return Collections.unmodifiableSet(names);
	}

	//
	// Load operations
	//
	
	@Override
	public void load(InputStream in) {}
	
	@Override
	public void load(Reader reader) {}
	
	@Override
	public void loadFromXML(InputStream in) {}
}
